(this["webpackJsonpfallen-leaves"]=this["webpackJsonpfallen-leaves"]||[]).push([[0],{102:function(e,a,t){},103:function(e,a,t){},161:function(e,a,t){},162:function(e,a,t){},165:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(8),o=t.n(l),i=(t(101),t(102),t(92)),c=t(25),s=t(2),f=t(83);var d=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.imageUrl,r=a.range,l=a.size,o=a.count,i=a.opacity,c=new s.B,f=new s.i,d=c.load(n);d.center=new s.C(.5,.5),d.rotation=t.rotation||0;for(var u=new s.s({map:d,transparent:!0,size:l,sizeAttenuation:!0,opacity:i,blending:s.a,side:s.g,alphaTest:.1}),m=0;m<o;m++){var p=Math.random()*r-r/2,g=Math.random()*r/2,v=Math.random()*r-r/2,y=new s.D(p,g,v);for(var h in t)y[h]=t[h];f.vertices.push(y)}var w=new s.r(f,u);return w.name=e,w.castShadow=!0,w},u={imageUrl:"leaf_textures/leaf1.png",range:12e3,size:500,count:120,opacity:1},m={velocityY:0,velocityX:0,velocityZ:0,rotation:Math.PI,mass:.3,currentHorizontalOffset:0,maxHorizontalOffset:10,swingVelocity:.1,currentDeg:Math.PI,minDeg:Math.PI/2,maxDeg:3*Math.PI/2,degVelocity:.01,falledMatName:"falledLeaf1Mat",groupName:"falledLeaf1Group"},p={imageUrl:"leaf_textures/leaf2.png",range:12e3,size:500,count:120,opacity:1},g={velocityY:0,velocityX:0,velocityZ:0,rotation:Math.PI/2,mass:.6,currentHorizontalOffset:0,maxHorizontalOffset:14,swingVelocity:.1,currentDeg:Math.PI/2,minDeg:Math.PI/2,maxDeg:3*Math.PI/2,degVelocity:.02,falledMatName:"falledLeaf2Mat",groupName:"falledLeaf2Group"},v={imageUrl:"leaf_textures/leaf3.png",range:12e3,size:500,count:120,opacity:1},y={velocityY:0,velocityX:0,velocityZ:0,rotation:Math.PI,mass:.9,currentHorizontalOffset:0,maxHorizontalOffset:10,swingVelocity:.2,currentDeg:Math.PI,minDeg:Math.PI/2,maxDeg:3*Math.PI/2,degVelocity:.015,falledMatName:"falledLeaf3Mat",groupName:"falledLeaf3Group"},h=(Math.PI,Math.PI,Math.PI,Math.PI,function(e,a,t,n,r,l){var o=l.k,i=n[e.falledMatName],c=r[e.groupName];if(e.velocityY+=e.mass*o,e.y-=e.velocityY,e.y<=t+10){e.y=a,e.velocityY=0;var f=function(e,a,t,n,r){var l=new s.y(e);return l.position.set(a,t,n),l.scale.set(r,r,r),l}(i,e.x,-935,e.z,500);c.add(f)}}),w=t(44),M=(t(103),t(94));function E(e){var a=e.onTurn,t=e.discLabel,l=e.sliderLabel,o=Object(n.useState)(0),i=Object(w.a)(o,2),c=i[0],s=i[1];return r.a.createElement("div",{className:"disc"},r.a.createElement("div",{className:"outer"},r.a.createElement("p",{className:"disc-label"},t),r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"circle",style:{transform:"rotate(".concat(c,"deg)")}},r.a.createElement("div",{className:"pointer"}),r.a.createElement("div",{className:"arrow arrow_left"}),r.a.createElement("div",{className:"arrow arrow_right"}))),r.a.createElement("p",{id:"north",className:"direction"},"\u5317"),r.a.createElement("p",{id:"south",className:"direction"},"\u5357"),r.a.createElement("p",{id:"west",className:"direction"},"\u897f"),r.a.createElement("p",{id:"east",className:"direction"},"\u4e1c")),r.a.createElement("p",{className:"slider-label"},l),r.a.createElement(M.a,{type:"primary",min:0,max:360,onChange:function(e){s(e),a(e)},marks:{0:"\u5317",90:"\u4e1c",180:"\u5357",270:"\u897f",360:"\u5317"},tooltipVisible:!1}))}t(161);function z(e){var a=e.onChange,t=Object(n.useState)(0),l=Object(w.a)(t,2),o=l[0],i=l[1];return r.a.createElement("div",{className:"wind-strength"},r.a.createElement("p",{className:"slider-label"},"\u8c03\u6574\u98ce\u529b"),r.a.createElement(M.a,{min:0,max:5,step:.1,onChange:function(e){i(e),a(e)}}),r.a.createElement("p",{className:"current-strength"},"\u5f53\u524d",o))}function x(){var e={windDirection:Math.PI,windStrength:0,k:.01,a:.01},a={},t={},l={},o=Object(n.useRef)(),i=function(){var e=a.renderer,t=a.scene,n=a.camera;e.render(t,n)},c=function(a,n,r,o){var i=e.windStrength;h(a,n,r,{falledLeaf1Mat:l.falledLeaf1Mat,falledLeaf2Mat:l.falledLeaf2Mat,falledLeaf3Mat:l.falledLeaf3Mat,falledLeaf4Mat:l.falledLeaf4Mat},t,e),0===i?function(e,a,t){var n=t.a;e.velocityX>0&&(e.velocityX-=n,e.velocityX<=0&&(e.velocityX=0)),e.velocityZ>0&&(e.velocityZ-=n,e.velocityZ<=0&&(e.velocityZ=0)),e.velocityX<0&&(e.velocityX+=n,e.velocityX>=0&&(e.velocityX=0)),e.velocityZ<0&&(e.velocityZ+=n,e.velocityZ>=0&&(e.velocityZ=0)),(e.currentHorizontalOffset<=-e.maxHorizontalOffset||e.currentHorizontalOffset>=e.maxHorizontalOffset)&&(e.swingVelocity=0-e.swingVelocity),e.currentHorizontalOffset+=e.swingVelocity,e.x+=e.currentHorizontalOffset,e.z+=e.currentHorizontalOffset,function(e,a,t){var n=e.minDeg,r=e.maxDeg;e.currentDeg+=e.degVelocity,a.rotation=e.currentDeg,(e.currentDeg>r||e.currentDeg<n)&&(e.degVelocity=-e.degVelocity)}(e,a)}(a,o,e):function(e,a,t){var n=t.windDirection,r=t.windStrength,l=t.k;e.velocityX+=Math.sin(n)*r*l,e.velocityZ+=-Math.cos(n)*r*l,e.x+=e.velocityX,e.z+=e.velocityZ,e.x>a&&(e.x=-a,e.velocityX=0),e.x<-a&&(e.x=a,e.velocityX=0),e.z>a&&(e.z=-a,e.velocityZ=0),e.z<-a&&(e.z=a,e.velocityZ=0)}(a,n,e)},w=function(){var e=a.scene,n=d("leaf1",u,m),r=d("leaf2",p,g),l=d("leaf3",v,y),o=new s.j,f=new s.j,h=new s.j,w=new s.j;window.group2=f,e.add(n,r,l),e.add(o,f,h,w),Object.assign(t,{falledLeaf1Group:o,falledLeaf2Group:f,falledLeaf3Group:h,falledLeaf4Group:w}),function e(){a.scene.children.forEach((function(e){if(e instanceof s.r){var a=e.geometry.vertices,t=e.material.map;a.forEach((function(e){c(e,5500,-1e3,t)})),e.geometry.verticesNeedUpdate=!0}})),requestAnimationFrame(e),i()}()},M=function(){var e=document.getElementById("webgl-output"),t=new s.v,n=function(e){var a=e.clientWidth/e.clientHeight,t=new s.o(45,a,.1,1e4);return t.position.set(20,40,10),t.lookAt(20,30,0),t}(e),r=function(e,a){var t=e.clientWidth,n=e.clientHeight,r=new s.E;return r.shadowMap.enabled=!0,r.shadowMapSoft=!0,r.shadowMap.type=s.n,r.setSize(t,n),r.shadowMap.enabled=!0,r.setClearColor(new s.d(a)),r}(e,13366524);!function(e){var a=new s.f(16777215,1);a.castShadow=!0,e.add(a)}(t),n.position.set(1500,150,-1500),e.appendChild(r.domElement);var l=function(e,a,t){var n=new f.a(e,a.domElement);return n.addEventListener("change",t.bind(void 0)),n}(n,r,(function(){i()}));l.maxPolarAngle=Math.PI/2.1,l.minDistance=500,l.maxDistance=5e3,a.scene=t,a.camera=n,a.renderer=r,r.render(t,n)};Object(n.useEffect)((function(){return function(){var e=new s.B,a=e.load("/leaf_textures/leaf1_falled.png"),t=new s.z({map:a,transparent:!0}),n=e.load("/leaf_textures/leaf2_falled.png"),r=new s.z({map:n,transparent:!0}),o=e.load("/leaf_textures/leaf3_falled.png"),i=new s.z({map:o,transparent:!0}),c=e.load("/leaf_textures/leaf4_falled.png"),f=new s.z({map:c,transparent:!0}),d=e.load("/ground/Ground19/Ground19_Color.jpg"),u=e.load("/ground/Ground19/Ground19_AO.jpg");d.wrapT=s.u,d.wrapS=s.u,d.repeat.set(10,10);var m=new s.m({map:d,aoMap:u,skinning:!0,flatShading:!0,color:15053410});Object.assign(l,{falledLeaf1Mat:t,falledLeaf2Mat:r,falledLeaf3Mat:i,falledLeaf4Mat:f,groundMat:m})}(),M(),function(){var e=a.scene,t=["/sky/forest2/px.png","/sky/forest2/nx.png","/sky/forest2/py.png","/sky/forest2/ny.png","/sky/forest2/pz.png","/sky/forest2/nz.png"];(new s.e).load(t,(function(a){e.background=a}))}(),function(){var e=a.scene,t=new s.c(200);e.add(t),i()}(),function(){var e=a.scene,t=new s.p(2e4,2e4),n=new s.l(t,l.groundMat);n.receiveShadow=!0,n.rotation.x=-Math.PI/2,n.position.y=-1e3,e.add(n),i()}(),w(),function(){}}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"left"},r.a.createElement(E,{onTurn:function(a){e.windDirection=a*Math.PI/180},discLabel:"\u98ce\u7684\u5439\u5411",sliderLabel:"\u8c03\u6574\u98ce\u5411"}),r.a.createElement(z,{onChange:function(a){e.windStrength=a,o.current.volume=.2*a,o.current.muted=!1}}),r.a.createElement("p",{style:{fontSize:"18px"}},"\u670d\u52a1\u5668\u4e0a\u90e8\u7f72\u65f6\uff0c\u7531\u4e8e\u7eb9\u7406\u3001\u6a21\u578b\u8d44\u6e90\u8fc7\u5927\u548c\u670d\u52a1\u5668\u5e26\u5bbd\u4e0d\u591f\uff0c\u4f1a\u5bfc\u81f4\u957f\u65f6\u95f4\u52a0\u8f7d\u4e0d\u51fa\u6765\uff0c\u6682\u65f6\u6ca1\u6709\u597d\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u6b64\u9609\u5272\u4e86\u6811\u6a21\u578b\u548c\u9ad8\u914d\u5730\u9762\u7eb9\u7406\u3002")),r.a.createElement("div",{id:"webgl-output"}),r.a.createElement("audio",{ref:o,src:"/audios/Wind_grass_wispy_breeze.mp3",loop:!0,autoPlay:!0,muted:!0}))}t(162);function L(){return r.a.createElement("div",{className:"home"},r.a.createElement(x,null))}var N=function(){return r.a.createElement(i.a,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/"},r.a.createElement(L,null))))};o.a.render(r.a.createElement(N,null),document.getElementById("root"))},96:function(e,a,t){e.exports=t(165)}},[[96,1,2]]]);
//# sourceMappingURL=main.bad7a3c2.chunk.js.map